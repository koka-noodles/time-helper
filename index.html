<html>
  <head>
    <title>
      Riot Time selector
    </title>
    <style>
    .container {
      padding: 25px;
    }
    </style>
    <!-- Compiled and minified CSS -->
 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">


  </head>

<body>
  <div class="container">

    <h2>Time helper</h2>

    <div class="row">
      <form class="col s12">
        <div class="input-field col s6">
          <select id='region-selector'>
            <option>test value</option>
          </select>
          <label for="region-selector">Region</label>
        </div>
        <div class="input-field col s6">
           <input type="text" id='local-time' class="timepicker">
          <label for="local-time">Time</label>
        </div>
      </form>
    </div>

    <div class="card-panel">
      <span class="blue-text text-darken-2">Ensure you have filled out the time and selected your region for the values to appear.</span>
    </div>

    <div class="card-panel">
      <span class="">
        <h5>
          Region time
        </h5>

        NA Time: <span id='na-time'></span> (PST / PDT)<br />
        EUW Time: <span id='euw-time'></span> (GMT / BST)<br />
          &nbsp;&nbsp;&nbsp;&nbsp; - English Time: <span id='engb-time'></span> (GMT / BST)<br />
          &nbsp;&nbsp;&nbsp;&nbsp; - French Time: <span id='fr-time'></span> (GMT / BST)<br />
          &nbsp;&nbsp;&nbsp;&nbsp; - German Time: <span id='de-time'></span> (GMT / BST)<br />
          &nbsp;&nbsp;&nbsp;&nbsp; - Italian Time: <span id='it-time'></span> (GMT / BST)<br />
          &nbsp;&nbsp;&nbsp;&nbsp; - Spanish Time: <span id='es-time'></span> (GMT / BST)<br />
        EUNE Time: <span id='eune-time'></span> (CEST)<br />
          &nbsp;&nbsp;&nbsp;&nbsp; - English Time: <span id='enpl-time'></span> (CET / CEST)<br />
          &nbsp;&nbsp;&nbsp;&nbsp; - Polish Time: <span id='pl-time'></span> (CET / CEST)<br />
          &nbsp;&nbsp;&nbsp;&nbsp; - Greek Time: <span id='el-time'></span> (CET / CEST)<br />
          &nbsp;&nbsp;&nbsp;&nbsp; - Czech Time: <span id='cs-time'></span> (CET / CEST)<br />
          &nbsp;&nbsp;&nbsp;&nbsp; - Hungarian Time: <span id='hu-time'></span> (CET / CEST)<br />
        TR Time: <span id='tr-time'></span> (TRT)<br />
        RU Time: <span id='ru-time'></span> (RUT)<br />
        LAN Time: <span id='lan-time'></span> (CST / CDT)<br />
        LAS Time: <span id='las-time'></span> (ART)<br />
        BR Time: <span id='br-time'></span> (BRT)<br />
        JP Time: <span id='jp-time'></span> (JST)<br />
        KR Time: <span id='kr-time'></span> (KST)<br />
      </span>
    </div>


  </div>

  <!-- Compiled and minified JavaScript -->

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>
<script>
((doc) => {
  var regions = {
    'na': {time: -8, name: 'NA (PST / PDT)'},
    'euw': {time: 0, name: 'EUW (GMT / BST)'},
    'engb': {time: 0, name: 'English (GMT / BST)'},
    'fr': {time: 0, name: 'French'},
    'de': {time: 0, name: 'German'},
    'it': {time: 0, name: 'Italian'},
    'es': {time: 0, name: 'Spanish'},
    'eune': {time: 2, name: 'EUNE (CET / CEST)'},
    'pl': {time: 2, name: 'Polish'},
    'el': {time: 2, name: 'Greek'},
    'hu': {time: 2, name: 'Hungarian'},
    'cs': {time: 2, name: 'Czech'},
    'tr': {time: 3, name: 'TR (TRT)'},
    'ru': {time: 4, name: 'RU (MSK)'},
    'lan': {time: -6, name: 'LAN (CST / CDT)'},
    'las': {time: -3, name: 'LAS (ART)'},
    'br': {time: -3, name: 'BR (BRT)'},
    'jp': {time: 9, name: 'JP (JST)'},
    'kr': {time: 9, name: 'KR (KST)'}
  }
  var $select = doc.querySelector('#region-selector')
  var $time = doc.querySelector('#local-time')

  while($select.firstChild) {
    $select.firstChild.remove();
  }
  Object.keys(regions).forEach(r => {
    let region = regions[r];
    var item = doc.createElement('option')
    item.textContent = region.name
    item.value = r
    $select.appendChild(item);
  })

  var onUpdate = () => {
    var $select = doc.querySelector('#region-selector')
    var otherRegions = Object.keys(regions).filter(r => {
      return r !== $select.value;
    })
    otherRegions.forEach(region => {
      var [hour, minute, second] = $time.value.split(':')
      var d = new Date();
      hour = parseInt(hour, 10) + (regions[region].time - regions[$select.value].time)
      d.setHours(hour)
      d.setMinutes(minute)
      // d.setSeconds(second)
      var regionTime = d.toTimeString().split(' ')[0].substr(0, 5);
      doc.querySelector(`#${region}-time`).textContent = regionTime;
    });
  };

  $($time).on('change', onUpdate);
  $($select).on('change', onUpdate);

  $(document).ready(function() {
    $('select').material_select();
  });
  $('.timepicker').pickatime({
    default: 'now', // Set default time: 'now', '1:30AM', '16:30'
    fromnow: 0,       // set default time to * milliseconds from now (using with default = 'now')
    twelvehour: false, // Use AM/PM or 24-hour format
    donetext: 'OK', // text for done-button
    cleartext: 'Clear', // text for clear-button
    canceltext: 'Cancel', // Text for cancel-button
    autoclose: true, // automatic close timepicker
    ampmclickable: true, // make AM PM clickable
    aftershow: function(){} //Function for after opening timepicker
  });
})(document)

</script>


</body>
</html>
